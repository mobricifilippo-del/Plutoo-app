/* =========================================================
   Plutoo â€“ style.css (v9)
   ========================================================= */
*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
  --bg-0:#0b0f17; --bg-1:#101726; --bg-2:#121a2c;
  --grad-1:#0b0f17; --grad-2:#1a1440; --grad-3:#2a1a74;
  --txt-1:#e9ecff; --txt-2:#c9cff2; --muted:#93a0c7;
  --violet:#8a5bff; --violet-2:#9c6aff; --blue:#4cc3ff;
  --green:#2bd67b; --shadow:0 10px 28px rgba(0,0,0,.35),0 2px 10px rgba(0,0,0,.25);
  --radius:16px; --radius-xl:22px;
}
html,body{height:100%}
body{
  margin:0; font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--txt-1);
  background: radial-gradient(1200px 800px at 50% -10%, var(--grad-3), transparent),
             linear-gradient(180deg, var(--grad-2), var(--grad-1));
}
.hidden{display:none!important}
.screen{display:none;padding:16px}
.screen.active{display:block}

/* Topbar */
.topbar{position:sticky;top:0;z-index:50;display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background:rgba(12,16,26,.75);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.06)}
.brand-slot{display:flex;align-items:center;gap:10px}
.brand{width:28px;height:28px;border-radius:8px;box-shadow:var(--shadow)}
.brand-name{font-weight:700}
.auth a{color:#cfd5ff;text-decoration:none;margin-left:14px;font-weight:600}
.auth .primary{background:linear-gradient(90deg,var(--violet),var(--violet-2));color:#fff;padding:8px 12px;border-radius:12px}

/* Buttons/links */
.btn{display:inline-flex;align-items:center;justify-content:center;border:0;border-radius:14px;font-weight:700;cursor:pointer}
.btn.primary{background:linear-gradient(90deg,var(--violet),var(--violet-2));color:#fff;padding:12px 18px;box-shadow:var(--shadow)}
.btn.light{background:#202a42;color:var(--txt-1);padding:10px 14px;border:1px solid rgba(255,255,255,.08)}
.btn.ghost{background:transparent;color:var(--txt-1);padding:8px 12px;border:1px dashed rgba(255,255,255,.14)}
.btn.xs{padding:8px 12px;font-size:.9rem}
.btn.full{width:100%}
.link-under,.link-inline{color:var(--blue);background:none;border:0;text-decoration:underline;cursor:pointer}
.small{font-size:.9rem}.muted{color:var(--muted)}
.dot{opacity:.6}

/* HOME */
.hero{max-width:760px;margin:24px auto 40px;text-align:center}
.hero-logo{width:200px;height:200px;border-radius:36px;display:block;margin:44px auto 22px;object-fit:contain;box-shadow:0 24px 60px rgba(138,91,255,.25)}
.home-footer{margin-top:12px;display:flex;justify-content:center;align-items:center;gap:10px;color:var(--muted)}
.sponsor-block,.sponsor-app{text-align:center;margin:22px auto 0}
.sponsor-label{color:var(--muted);margin-bottom:8px}
.sponsor-img{width:64px;height:auto;filter:drop-shadow(0 6px 18px rgba(0,0,0,.35))}

/* Geobar */
.geobar{background:linear-gradient(180deg,#ffffff08,#ffffff05);border:1px solid rgba(255,255,255,.08);color:var(--txt-1);border-radius:18px;padding:14px 14px;margin:10px 6px 4px;display:flex;align-items:center;justify-content:space-between;gap:12px;box-shadow:var(--shadow)}
.g-actions{display:flex;gap:8px}

/* Tabs + filters */
.filters-header{display:flex;align-items:center;justify-content:space-between;margin:12px 4px 8px}
.tabs{display:flex;gap:10px}
.tab{padding:10px 14px;border-radius:999px;border:1px solid rgba(255,255,255,.08);background:#1a2135;color:#e4e8ff;font-weight:700}
.tab.active{background:linear-gradient(90deg,#5a2dfd,#8c62ff);color:#fff;box-shadow:var(--shadow)}
.tabpane{display:none}.tabpane.active{display:block}
.counter{margin:10px 4px;color:var(--muted)}

.filter-panel{background:var(--bg-1);margin:8px 0 10px;border-radius:18px;border:1px solid rgba(255,255,255,.08);box-shadow:var(--shadow);padding:12px}
.f-grid{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.f-item{display:flex;flex-direction:column;gap:6px;font-size:.95rem}
.f-item select,.f-item input{background:#1b243b;color:var(--txt-1);border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:10px 12px;outline:none}
.f-actions{display:flex;justify-content:flex-end;gap:10px;margin-top:8px}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
.chip-wrap{position:relative}
.chip{background:#1a2137;color:var(--txt-1);padding:6px 10px;border-radius:999px;border:1px solid rgba(255,255,255,.08)}
.chip-x{position:absolute;right:-8px;top:-8px;width:22px;height:22px;border-radius:50%;border:0;background:#2a3352;color:#fff;cursor:pointer}

/* Grid near */
.grid{display:grid;grid-template-columns:1fr 1fr;gap:14px;padding-bottom:92px}
.card{background:linear-gradient(180deg,#0f1626,#141c30);border:1px solid rgba(255,255,255,.08);border-radius:var(--radius);overflow:hidden;box-shadow:var(--shadow);position:relative}
.card img{width:100%;height:170px;object-fit:cover;display:block}
.online{position:absolute;left:10px;top:10px;width:10px;height:10px;border-radius:50%;background:var(--green);box-shadow:0 0 0 3px rgba(0,0,0,.35)}
.card-info{padding:12px}
.title{display:flex;align-items:center;justify-content:space-between;gap:8px}
.name{font-weight:800}
.dist{background:#2a324d;color:#fff;padding:8px 10px;border-radius:999px;font-weight:700;font-size:.9rem}
.actions{display:flex;gap:10px;margin-top:10px}
.circle{width:48px;height:48px;border-radius:999px;border:0;background:#ffd9e3;display:inline-flex;align-items:center;justify-content:center;font-size:1.35rem;box-shadow:var(--shadow);transition:transform .1s ease}
.circle.no{background:#ffdfe5}
.circle.like{background:#e7ffe6}
.circle:active{transform:scale(.95)}
.paw{filter:drop-shadow(0 6px 12px rgba(138,91,255,.45))}

/* Scorri */
#swipe .deck{padding-bottom:92px}
.card.big{border-radius:var(--radius-xl)}
.card.big .card-img{height:340px}
.bio{color:var(--txt-2);margin-top:8px}
.pulse{animation:cardPulse .35s ease-out}
@keyframes cardPulse{0%{transform:scale(.985);opacity:.6}100%{transform:scale(1);opacity:1}}

/* Match */
.list{display:flex;flex-direction:column;gap:10px;padding-bottom:92px}
.item{display:flex;align-items:center;gap:12px;background:var(--bg-2);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:10px 12px}
.item img{width:46px;height:46px;border-radius:12px;object-fit:cover}
.btn.pill{border-radius:999px;padding:8px 12px}

/* Banner adv */
.ad-banner{position:sticky;bottom:0;left:0;right:0;background:#10172a;color:#c1c8ee;text-align:center;padding:10px;border-top:1px solid rgba(255,255,255,.1);box-shadow:0 -6px 16px rgba(0,0,0,.35);z-index:40}

/* Modal base + fallback dialog */
.modal{border:0;border-radius:18px;padding:0;background:var(--bg-1);color:var(--txt-1);box-shadow:var(--shadow);width:min(680px,96vw)}
.modal::backdrop{background:rgba(0,0,0,.55)}
.modal .pad{padding:16px}
.modal:not([open]){display:none}
.modal.fallback{position:fixed;inset:0;display:flex!important;align-items:center;justify-content:center;background:rgba(0,0,0,.55);padding:16px;z-index:9999}
.modal.fallback>.pad{background:var(--bg-1);color:var(--txt-1);border-radius:18px;max-width:680px;width:100%;box-shadow:var(--shadow)}

/* Bottom sheets */
.sheet{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:end center;z-index:60}
.sheet.show{display:grid}
.sheet-box{width:100%;background:var(--bg-1);border-top-left-radius:24px;border-top-right-radius:24px;box-shadow:var(--shadow)}
.sheet-head{display:flex;align-items:center;justify-content:space-between;padding:12px 14px;border-bottom:1px solid rgba(255,255,255,.08)}
.sheet-body{padding:14px}
.close{background:#253053;color:#fff;border:0;width:36px;height:36px;border-radius:10px}
.inp{width:100%;background:#1b243b;color:#e8ecff;border:1px solid rgba(255,255,255,.14);border-radius:12px;padding:12px;margin-bottom:10px}
.thread{max-height:38vh;overflow:auto;display:flex;flex-direction:column;gap:8px}
.bubble{align-self:flex-start;background:#253053;padding:8px 12px;border-radius:14px 14px 14px 6px}
.bubble.me{align-self:flex-end;background:#5a2dfd}

/* Empty */
.empty{color:var(--muted);text-align:center;padding:24px}

/* Sponsor foot (app) */
.sponsor-foot{margin:16px auto;text-align:center}

/* ===== Pagina profilo full-screen ===== */
.page{position:fixed;inset:0;background:var(--bg-0);z-index:70;display:none;flex-direction:column}
.page.show{display:flex;animation:slideIn .28s ease-out}
@keyframes slideIn{from{transform:translateY(12%);opacity:.6}to{transform:translateY(0);opacity:1}}
.page-head{position:sticky;top:0;display:flex;align-items:center;gap:10px;padding:12px 14px;background:rgba(0,0,0,.35);backdrop-filter:blur(8px);border-bottom:1px solid rgba(255,255,255,.08)}
.page-head .title{font-weight:800}
.back{border:0;background:#253053;color:#fff;width:36px;height:36px;border-radius:10px}
.page-body{overflow:auto;padding:12px}
.pp-cover{width:100%;height:320px;object-fit:cover;border-radius:16px}
.pp-section{background:var(--bg-1);border:1px solid rgba(255,255,255,.08);border-radius:16px;padding:12px;margin-top:10px}
.pp-actions{display:flex;gap:12px;margin:12px 0}

/* ===== Animazioni swipe/bump ===== */
@keyframes swipeLeft{to{transform:translateX(-22%) rotate(-6deg);opacity:0}}
@keyframes swipeRight{to{transform:translateX(22%) rotate(6deg);opacity:0}}
.card.swipe-left{animation:swipeLeft .22s ease-out forwards}
.card.swipe-right{animation:swipeRight .22s ease-out forwards}
@keyframes btnBump{0%{transform:scale(.9)}100%{transform:scale(1)}}
.button-bump{animation:btnBump .12s ease-in-out}

/* Responsive */
@media (min-width:720px){
  .card.big .card-img{height:420px}
  .grid{gap:16px}
}
/* === Fix gesture: abilita pan verticale e swipe orizzontale sulla card === */
#swipe .deck .card { touch-action: pan-y; }

/* === Profilo: galleria, post, verifica === */
.pp-gallery { display:grid; grid-template-columns:repeat(3,1fr); gap:8px; margin-top:8px; }
.pp-thumb { width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; border:1px solid rgba(255,255,255,.1); }
.pp-uploader { display:flex; gap:8px; align-items:center; margin-top:8px; flex-wrap:wrap; }
.pp-uploader input[type="file"] { display:none; }
.pp-uploader .btn.small { padding:8px 10px; font-size:.9rem; border-radius:10px; }

.pp-post-new { display:flex; flex-direction:column; gap:8px; }
.pp-textarea {
  width:100%; min-height:80px; resize:vertical;
  background:#1b243b; color:#e8ecff; border:1px solid rgba(255,255,255,.14); border-radius:12px; padding:10px;
}
.pp-posts { display:flex; flex-direction:column; gap:10px; margin-top:8px; }
.pp-post { background:#0f1729; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; }
.pp-post .ts { color:var(--muted); font-size:.85rem; margin-top:4px; }

.pp-verify-row { display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.badge-state { margin-top:8px; font-weight:700; }
.badge-ok { color:#2bd67b; }
.badge-ko { color:#ff7f96; }
