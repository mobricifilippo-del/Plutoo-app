<!DOCTYPE html>
<html lang="it">
<head> 
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Plutoo</title>

  <!-- PWA / Meta -->
  <meta name="theme-color" content="#0B0B0F" />
  <meta name="color-scheme" content="dark" />
  <meta name="description" content="Plutoo — social per DOGS: Vicino a te, swipe Amore/Giochiamo, profili con badge, selfie, servizi e sponsor." />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="plutoo-icon-192.png" />
  <link rel="apple-touch-icon" href="plutoo-icon-512.png" />

  <!-- CSS -->
  <link rel="preload" as="style" href="style.css" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- =============== HOME =============== -->
  <section id="homeScreen" class="home">
    <header class="home-header">
      <div class="home-bar">
        <div class="home-left">
          <div class="logo-row">
            <img src="plutoo-icon-192.png" alt="Plutoo" class="home-logo" />
          </div>
        </div>
        <div class="home-center"></div>
        <div class="home-right">
          <div class="lang-flags">
            <button id="langIT" class="btn tiny ghost" type="button" aria-label="Italiano">🇮🇹</button>
            <button id="langEN" class="btn tiny ghost" type="button" aria-label="English">🇬🇧</button>
          </div>
          <div class="auth-links">
            <a href="#" id="btnLogin">Login</a>
            <span>·</span>
            <a href="#" id="btnSignup">Registrati</a>
          </div>
        </div>
      </div>
    </header>

    <main class="home-main">
      <h1 id="heroLogo" class="hero-title">Plutoo</h1>
      <p class="hero-sub">Badoo per DOGS — trova amici a quattro zampe vicino a te</p>

      <!-- Pulsante Entra: animazione viola (gestita da CSS .enter-pulse) -->
      <button id="btnEnter" class="btn accent enter-btn" type="button" aria-label="Entra">
        Entra
        <span class="enter-pulse"></span>
      </button>

      <!-- Sponsor ufficiale (Home only) -->
      <div class="sponsor">
        <div class="sponsor-title">Sponsor ufficiale</div>
        <a id="sponsorLink" href="#" class="sponsor-link" aria-label="Sponsor Fido">
          <img src="sponsor-logo.png" alt="Fido" class="sponsor-logo" />
        </a>
        <div class="sponsor-copy">Fido, il gelato per i nostri amici a quattro zampe</div>
      </div>

      <!-- Pulsante etico (Home only) -->
      <a class="ethical" id="btnEthics" href="#" rel="noopener">
        👉 Non abbandonare mai i tuoi amici 🐾 (canili nelle vicinanze)
      </a>
    </main>

    <footer class="home-footer">
      <a href="privacy.html" class="foot-link" target="_blank" rel="noopener">Privacy</a>
      <a href="termini.html" class="foot-link" target="_blank" rel="noopener">Termini</a>
      <a href="mailto:plutoo.team@gmail.com" class="foot-link">Contatti</a>
    </footer>
  </section>

  <!-- =============== APP =============== -->
  <section id="appScreen" class="hidden" aria-hidden="true">
    <header class="topbar">
      <div class="tabs" role="tablist" aria-label="Navigazione">
        <img src="plutoo-icon-192.png" alt="Plutoo" class="app-badge">
        <button id="tabNearby" class="tab active" role="tab" aria-selected="true">Vicino a te</button>
        <button id="tabLove" class="tab" role="tab" aria-selected="false">Amore</button>
        <button id="tabPlay" class="tab" role="tab" aria-selected="false">Giochiamo insieme</button>

        <div class="tab menu-wrapper">
          <button id="tabLuoghi" class="tab menu" aria-expanded="false">Luoghi PET</button>
          <div id="luoghiMenu" class="menu-list" role="menu" aria-label="Luoghi PET">
            <button class="menu-item" data-cat="veterinari" role="menuitem">Veterinari</button>
            <button class="menu-item" data-cat="toelettatura" role="menuitem">Toelettatura</button>
            <button class="menu-item" data-cat="negozi" role="menuitem">Negozi</button>
            <button class="menu-item" data-cat="parchi" role="menuitem">Parchi</button>
            <button class="menu-item" data-cat="addestratori" role="menuitem">Addestratori</button>
            <button class="menu-item" data-cat="canili" role="menuitem">Canili</button>
          </div>
        </div>

        <button id="btnSearchPanel" class="tab" role="tab">Ricerca personalizzata</button>

        <div class="spacer"></div>
        <a id="sponsorLinkApp" href="#" class="sponsor-link small" aria-label="Sponsor">
          <img src="sponsor-logo.png" alt="Fido" class="sponsor-logo small" />
        </a>
        <button id="btnPlus" class="tab gold" type="button">Plus</button>
      </div>
    </header>

    <!-- Viste -->
    <main class="views">
      <!-- Vicino a te (griglia 2×N) -->
      <section id="viewNearby" class="view active" aria-label="Vicino a te">
        <div id="nearGrid" class="grid"><!-- riempito da JS --></div>
      </section>

      <!-- Amore (swipe) -->
      <section id="viewLove" class="view" aria-label="Amore">
        <div class="deck">
          <article id="loveCard" class="card card-swipe">
            <img id="loveImg" class="card-img" src="" alt="" />
            <div class="card-info">
              <h3 id="loveTitleTxt"></h3>
              <p id="loveMeta" class="meta"></p>
              <p id="loveBio" class="bio"></p>
            </div>
            <div class="card-actions">
              <button id="loveNo"  class="btn ghost" aria-label="No">🥲</button>
              <button id="loveYes" class="btn ghost" aria-label="Sì">💛</button>
            </div>
          </article>
        </div>
      </section>

      <!-- Giochiamo (swipe) -->
      <section id="viewPlay" class="view" aria-label="Giochiamo insieme">
        <div class="deck">
          <article id="playCard" class="card card-swipe">
            <img id="playImg" class="card-img" src="" alt="" />
            <div class="card-info">
              <h3 id="playTitleTxt"></h3>
              <p id="playMeta" class="meta"></p>
              <p id="playBio" class="bio"></p>
            </div>
            <div class="card-actions">
              <button id="playNo"  class="btn ghost" aria-label="No">🥲</button>
              <button id="playYes" class="btn ghost" aria-label="Sì">💛</button>
            </div>
          </article>
        </div>
      </section>
    </main>

    <!-- Pagina profilo dedicata -->
    <section id="profilePage" class="hidden" aria-label="Profilo DOG">
      <button id="closeProfile" class="btn ghost back-btn" aria-label="Torna indietro">Indietro</button>
      <div id="ppBody" class="profile-body"><!-- riempito da JS --></div>
    </section>

    <!-- Chat -->
    <section id="chatPane" class="hidden" aria-label="Chat">
      <header class="chat-header">
        <button id="closeChat" class="btn ghost">Chiudi</button>
      </header>
      <ul id="chatList" class="chat-list"></ul>
      <div id="chatComposer" class="chat-composer">
        <input id="chatInput" type="text" placeholder="Scrivi un messaggio…" />
        <button id="sendMsg" class="btn accent">Invia</button>
      </div>
    </section>

    <!-- Pannello Ricerca personalizzata -->
    <section id="searchPanel" class="panel hidden" aria-modal="true" role="dialog" aria-labelledby="searchTitle">
      <div class="panel-body">
        <header class="panel-header">
          <h2 id="searchTitle">Ricerca personalizzata</h2>
          <button id="closePanel" class="btn ghost" type="button" aria-label="Chiudi">Chiudi</button>
        </header>

        <!-- Filtri liberi -->
        <fieldset id="filtersFree" style="margin:.5rem 0 1rem;border:0;padding:0">
          <legend class="soft">Filtri liberi</legend>

          <label for="sexInput">Sesso</label>
          <select id="sexInput">
            <option value="">Qualsiasi</option>
            <option value="M">Maschio</option>
            <option value="F">Femmina</option>
          </select>

          <label for="breedInput" style="display:block;margin-top:.6rem">Razza</label>
          <input id="breedInput" type="text" autocomplete="off" placeholder="Inizia a digitare…" />
          <ul id="breedSuggest" class="suggest" aria-label="Suggerimenti razza"></ul>

          <div style="display:flex;gap:.5rem;align-items:center;margin-top:.6rem">
            <label for="distInput" style="margin-right:.25rem">Distanza</label>
            <input id="distInput" type="range" min="1" max="50" value="5" />
            <input id="distNum" type="number" min="1" max="50" value="5" style="width:70px" aria-label="Distanza (km)" />
            <span class="soft">km</span>
          </div>
        </fieldset>

        <!-- Filtri Gold (🔒 se non Plus) -->
        <fieldset id="filtersGold" style="margin:1rem 0;border:0;padding:0">
          <legend class="soft">Filtri Gold <span aria-hidden="true">🔒</span></legend>

          <label for="onlyVerified" class="gold-locked" title="Disponibile con Plus">Solo verificati ✅ <span aria-hidden="true">🔒</span></label>
          <input id="onlyVerified" type="checkbox" data-plus-only="true" />

          <div style="margin-top:.6rem">
            <label for="mateAvail" class="gold-locked" title="Disponibile con Plus">Disponibile per accoppiamento <span aria-hidden="true">🔒</span></label>
            <select id="mateAvail" data-plus-only="true">
              <option value="">Qualsiasi</option>
              <option value="si">Sì</option>
              <option value="no">No</option>
            </select>
          </div>

          <div style="display:flex;flex-wrap:wrap;gap:.6rem;margin-top:.6rem">
            <div>
              <label class="gold-locked" for="weightMin" title="Disponibile con Plus">Peso min (kg) <span aria-hidden="true">🔒</span></label>
              <input id="weightMin" type="number" min="1" max="100" step="1" value="" data-plus-only="true" />
            </div>
            <div>
              <label class="gold-locked" for="weightMax" title="Disponibile con Plus">Peso max (kg) <span aria-hidden="true">🔒</span></label>
              <input id="weightMax" type="number" min="1" max="100" step="1" value="" data-plus-only="true" />
            </div>
            <div>
              <label class="gold-locked" for="heightMin" title="Disponibile con Plus">Altezza min (cm) <span aria-hidden="true">🔒</span></label>
              <input id="heightMin" type="number" min="5" max="120" step="1" value="" data-plus-only="true" />
            </div>
            <div>
              <label class="gold-locked" for="heightMax" title="Disponibile con Plus">Altezza max (cm) <span aria-hidden="true">🔒</span></label>
              <input id="heightMax" type="number" min="5" max="120" step="1" value="" data-plus-only="true" />
            </div>
          </div>
        </fieldset>

        <div class="panel-actions">
          <button id="applyFilters" class="btn accent" type="button">Applica</button>
          <button id="resetFilters" class="btn ghost" type="button">Reset</button>
        </div>
      </div>
    </section>

    <!-- Modal Plus (invariato) -->
    <section id="plusModal" class="modal hidden" aria-modal="true" role="dialog">
      <div class="modal-card">
        <header class="modal-hd">
          <h3>Plutoo Plus</h3>
          <button id="closePlus" class="btn ghost" aria-label="Chiudi">×</button>
        </header>
        <p>Sblocca tutti i filtri Gold, rimuove pubblicità e attiva funzioni extra.</p>
        <div class="panel-actions" style="margin-top:.75rem;display:flex;gap:.5rem;justify-content:flex-end;">
          <button id="goPlus" class="btn accent" type="button">Attiva Plus</button>
          <button id="laterPlus" class="btn ghost" type="button">Più tardi</button>
        </div>
      </div>
    </section>    
  </section>

  <!-- JS (unico) -->
  <script src="app.js?v=9" defer></script>
</body>
</html>
