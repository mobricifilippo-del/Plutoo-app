<!DOCTYPE html>
<html lang="it">
>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>Plutoo — Gold Edition</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0B0B0F">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="plutoo-icon-192.png">

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="plutoo-icon-192.png">
  <link rel="icon" type="image/png" sizes="192x192" href="plutoo-icon-192.png">

  <!-- Styles -->
  <link rel="stylesheet" href="style.css?v=gold2" />

  <!-- CSP (compatibile Android WebView) -->
  <meta http-equiv="Content-Security-Policy"
        content="default-src 'self' https: blob: data:;
                 img-src 'self' https: blob: data:;
                 media-src 'self' https: blob: data:;
                 style-src 'self' 'unsafe-inline';
                 script-src 'self' 'unsafe-inline';
                 connect-src 'self' https:;
                 frame-src https:;">
</head>
<body class="theme-gold">
  <!-- Splash -->
  <div id="splash" class="splash">
    <div class="splash-inner">
      <img src="plutoo-icon-512.png?v=gold2" alt="Plutoo" class="splash-logo" />
      <div class="splash-heart">💛</div>
    </div>
  </div>

  <!-- App -->
  <div id="app" class="app hidden">
    <!-- Top bar -->
    <header class="topbar">
      <div class="topbar-left">
        <button id="navHome" class="brand">
          <img src="plutoo-icon-192.png?v=gold2" alt="Plutoo" class="brand-mark" />
          <span class="brand-text">Plutoo</span>
        </button>
      </div>

      <nav class="tabs">
        <button class="tab" data-view="nearby" id="tab-nearby">Vicino a te</button>
        <button class="tab" data-view="love" id="tab-love">Amore 🥲💛</button>
        <button class="tab" data-view="play" id="tab-play">Giochiamo 🐕</button>
        <button class="tab" data-view="plus" id="tab-plus">Plus ⭐</button>
        <button class="tab" data-view="filters" id="tab-filters">Ricerca 🔍</button>

        <div class="dropdown">
          <button class="tab dropdown-toggle" id="tab-services">Luoghi PET 🐾</button>
          <div class="dropdown-menu">
            <button class="dropdown-item" data-service="veterinari">Veterinari</button>
            <button class="dropdown-item" data-service="toelettature">Toelettature</button>
            <button class="dropdown-item" data-service="negozi">Negozi</button>
            <button class="dropdown-item" data-service="parchi">Parchi</button>
            <button class="dropdown-item" data-service="addestratori">Addestratori</button>
            <button class="dropdown-item" data-service="canili">Canili</button>
          </div>
        </div>
      </nav>

      <div class="topbar-right">
        <!-- Bandiere -->
        <div class="lang-switch">
          <button class="lang-btn" data-lang="it" aria-pressed="true" id="btn-lang-it">🇮🇹</button>
          <button class="lang-btn" data-lang="en" aria-pressed="false" id="btn-lang-en">🇬🇧</button>
        </div>
        <!-- Login/Registrati -->
        <div class="auth-chip-group">
          <button id="btnLogin" class="chip chip-gold">Login</button>
          <button id="btnSignup" class="chip chip-gold">Registrati</button>
        </div>
      </div>
    </header>

    <!-- HOME -->
    <main id="view-home" class="view view-active">
      <section class="hero">
        <img src="plutoo-icon-512.png?v=gold2" alt="Plutoo" class="hero-logo" />
        <p class="hero-subtitle">
          L’app etica che unisce proprietari di Dog per amicizie reali e accoppiamenti responsabili.
        </p>
        <button id="btnEnter" class="btn btn-primary btn-enter">ENTRA</button>

        <!-- Sponsor -->
        <div class="sponsor">
          <button id="sponsorFido" class="sponsor-card">
            <img src="sponsor-logo.png?v=gold2" alt="Fido" class="sponsor-logo" />
            <div class="sponsor-copy">
              <div class="sponsor-title">Fido</div>
              <div class="sponsor-text">Il gelato per i nostri amici a quattro zampe</div>
            </div>
          </button>
        </div>
      </section>

      <footer class="ethic-footer">
        <button id="btnEthic" class="ethic-btn">
          Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)
        </button>
      </footer>
    </main>

    <!-- VICINO A TE -->
    <main id="view-nearby" class="view" hidden>
      <section class="grid grid-2" id="nearbyGrid"></section>
      <footer class="page-footer">
        <div class="page-sponsor">
          <button id="sponsorFido2" class="sponsor-inline">
            <img src="sponsor-logo.png?v=gold2" alt="Fido" />
            <span>Il gelato per i nostri amici a quattro zampe</span>
          </button>
        </div>
        <button id="btnEthic2" class="ethic-btn small">
          Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)
        </button>
      </footer>
    </main>

    <!-- AMORE -->
    <main id="view-love" class="view" hidden>
      <section class="swipe-stage">
        <div id="swipeCard" class="card-swipe"></div>
        <div class="swipe-actions">
          <button id="btnDislike" class="btn ghost big">🥲</button>
          <button id="btnLike" class="btn gold big">💛</button>
        </div>
      </section>

      <div id="matchPopup" class="match-popup" hidden>
        <div class="match-inner">
          <div class="match-heart">💛</div>
          <h3>È un match!</h3>
          <button id="btnGoChat" class="btn btn-primary">Vai in chat</button>
        </div>
      </div>
    </main>

    <!-- PLUS -->
    <main id="view-plus" class="view" hidden>
      <section class="plus-hero">
        <h2>Plutoo Gold</h2>
        <p>Rimuove tutti gli annunci e sblocca i filtri Gold Premium.</p>
        <div class="price">€39,90 / anno</div>
        <button id="btnBuyPlus" class="btn btn-primary">Abbonati ora</button>
      </section>
      <ul class="plus-features">
        <li>Niente pubblicità</li>
        <li>Filtri Gold sbloccati</li>
        <li>Accesso prioritario</li>
      </ul>
    </main>

    <!-- RICERCA -->
    <main id="view-filters" class="view" hidden>
      <form id="filtersForm" class="filters-form">
        <label>Razza</label>
        <input id="breed" name="breed" type="text" placeholder="Es. Labrador" />
        <div id="breedSuggest" class="suggest"></div>

        <label>Età</label><input id="age" name="age" type="number" min="0" max="30" />
        <label>Sesso</label>
        <select id="sex" name="sex">
          <option value="">Qualsiasi</option>
          <option value="male">Maschio</option>
          <option value="female">Femmina</option>
        </select>
        <label>Distanza (km)</label><input id="distance" name="distance" type="number" min="1" max="500" />

        <div class="divider">Filtri Gold</div>
        <label><input type="checkbox" id="verified" name="verified" />Badge verificato</label>

        <div class="actions">
          <button type="submit" class="btn btn-primary">Applica</button>
          <button type="reset" class="btn ghost">Reset</button>
        </div>
      </form>
    </main>

    <!-- PROFILO DOG -->
    <section id="profilePage" class="profile-page" hidden>
      <button id="btnCloseProfile" class="profile-close">✕</button>
      <div class="profile-content">
        <div class="profile-photo frame-gold" id="profileMainPhoto"></div>
        <div class="profile-meta">
          <h2 id="profileName">Dog</h2>
          <div id="profileInfo"></div>
          <span class="badge badge-gold" id="badgeVerified" hidden>✔ Gold</span>
        </div>
        <div class="profile-gallery" id="profileGallery"></div>
        <div class="profile-selfie">
          <div id="selfieBlur" class="selfie-blur">Guarda il selfie (video premio)</div>
        </div>
        <div class="profile-actions">
          <button id="btnProfileDislike" class="btn ghost big">🥲</button>
          <button id="btnProfileLike" class="btn gold big">💛</button>
        </div>
      </div>
    </section>

    <!-- CHAT -->
    <section id="chatPage" class="chat-page" hidden>
      <header class="chat-header">
        <button id="btnCloseChat" class="btn ghost">←</button>
        <h3 id="chatTitle">Chat</h3>
      </header>
      <div id="chatMessages" class="chat-messages"></div>
      <form id="chatForm" class="chat-input">
        <input id="chatText" type="text" placeholder="Scrivi un messaggio…" />
        <button id="chatSend" class="btn btn-primary" type="submit">Invia</button>
      </form>
    </section>

    <!-- LIKES -->
    <section id="likesPage" class="likes-page" hidden>
      <header class="likes-header">
        <button id="btnCloseLikes" class="btn ghost">←</button>
        <h3>Like ricevuti</h3>
      </header>
      <div id="likesList" class="grid grid-2"></div>
      <footer class="likes-footer">
        <p>3 gratis; per altri guarda un video premio.</p>
        <button id="btnUnlockMoreLikes" class="btn btn-primary">Sblocca altri like</button>
      </footer>
    </section>

    <!-- REWARD VIDEO -->
    <section id="rewardDialog" class="reward-dialog" hidden>
      <div class="reward-body">
        <h3>Video premio</h3>
        <p>Guarda un breve video per continuare.</p>
        <div class="reward-actions">
          <button id="rewardPlay" class="btn btn-primary">Guarda ora</button>
          <button id="rewardClose" class="btn ghost">Chiudi</button>
        </div>
      </div>
    </section>
  </div>

  <!-- Script -->
  <script src="app.js?v=gold2"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      setTimeout(() => {
        const splash = document.getElementById("splash");
        const app = document.getElementById("app");
        splash?.classList.add("hide");
        app?.classList.remove("hidden");
      }, 1200);

      const itBtn = document.getElementById("btn-lang-it");
      const enBtn = document.getElementById("btn-lang-en");
      function setLang(e) {
        const lang = e.currentTarget.dataset.lang;
        if (typeof window.setLanguage === "function") window.setLanguage(lang);
      }
      itBtn?.addEventListener("click", setLang);
      enBtn?.addEventListener("click", setLang);
    });
  </script>
</body>
</html>
