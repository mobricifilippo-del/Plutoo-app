<!DOCTYPE html>
<html lang="it">
<head> 
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Plutoo</title>
  <meta name="description" content="Plutoo ‚Äî Badoo per cani: trova amici, amore e giochi nei dintorni." />
  <meta name="theme-color" content="#0B0B0F" />
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" href="icon-192.png" sizes="192x192" />
  <link rel="apple-touch-icon" href="icon-192.png" />
  <link rel="preload" href="breeds.json" as="fetch" crossorigin="anonymous" />
  <link rel="stylesheet" href="style.css" />
</head>

<body class="theme-violet-gold">
  <!-- ======== HEADER ======== -->
  <header id="topbar" class="topbar">
    <div class="tb-left">
      <button id="btnMenu" class="btn icon" type="button" aria-label="Menu" title="Menu">‚ò∞</button>
      <a class="brand" href="#" aria-label="Plutoo Home">
        <span class="logo">üê∂</span><span class="brand-text">Plutoo</span>
      </a>
    </div>
    <nav class="tb-center" aria-label="Navigazione principale">
      <button class="tab active" data-tab="viewNearby" type="button">Vicino a te</button>
      <button class="tab" data-tab="viewLove" type="button">Amore</button>
      <button class="tab" data-tab="viewPlay" type="button">Giochiamo insieme</button>
      <button class="tab" data-tab="viewSearch" type="button">Ricerca personalizzata</button>
      <button class="tab" data-tab="viewServices" type="button">Servizi</button>
    </nav>
    <div class="tb-right">
      <button id="btnLang" class="btn ghost" type="button" aria-label="Lingua">üåê</button>
      <button id="btnPlus" class="btn gold" type="button" aria-haspopup="dialog" aria-expanded="false">Plus</button>
    </div>
  </header>

  <!-- Duplicato corretto: il secondo topbar √® rinominato -->
  <header id="topbar2" class="topbar sticky hidden" aria-hidden="true"></header>

  <!-- ======== HOME ======== -->
  <main id="homeScreen" class="home">
    <section class="hero">
      <div class="hero-logo" aria-hidden="true">üê∂</div>
      <h1 class="hero-title">Plutoo</h1>
      <p class="hero-subtitle">Amici, amore e giochi per i tuoi DOG vicino a te</p>
      <div class="hero-actions">
        <button id="btnEnter" class="btn primary xl" type="button">Entra</button>
      </div>
    </section>

    <!-- Etico: solo Home -->
    <section class="ethics-banner" aria-label="Messaggio etico">
      <div class="ethics-content">
        <span class="emoji">üêæ</span>
        <span class="ethics-lines">Non abbandonare mai i tuoi amici üêæ ‚Äì Canili nelle vicinanze</span>
        <a id="btnShelters" class="btn link" href="#" role="button">Apri in Maps</a>
      </div>
      <div class="legal-links legal-purple">
        <a href="privacy.html" target="_blank" rel="noopener" data-i18n="privacy">Privacy</a>
        <span>¬∑</span>
        <a href="termini.html" target="_blank" rel="noopener" data-i18n="terms">Termini</a>
      </div>
    </section>

    <!-- Sponsor (solo Home) -->
    <section class="sponsor-home" aria-label="Sponsor ufficiale">
      <h2 class="sponsor-title">Sponsor ufficiale</h2>
      <div class="sponsor-card">
        <a id="sponsorLink" href="#" role="button" aria-label="Apri sponsor Fido">
          <img src="sponsor-fido.png" alt="Fido ‚Äî il gelato per i tuoi amici a quattro zampe" class="sponsor-logo" />
        </a>
        <p class="sponsor-copy">Fido, il gelato per i tuoi amici a quattro zampe</p>
      </div>
    </section>
  </main>

  <!-- ======== APP VIEW (TABS) ======== -->
  <section id="appScreen" class="app hidden" aria-hidden="true">
    <div class="app-top">
      <div class="left">
        <button id="btnBack" class="btn tiny ghost" type="button" aria-label="Indietro">‚Üê</button>
      </div>
      <div class="center">
        <div class="tabs">
          <button class="tab" data-tab="viewNearby" type="button">Vicino a te</button>
          <button class="tab" data-tab="viewLove" type="button">Amore</button>
          <button class="tab" data-tab="viewPlay" type="button">Giochiamo insieme</button>
          <button class="tab" data-tab="viewSearch" type="button">Ricerca personalizzata</button>
          <button class="tab" data-tab="viewServices" type="button">Servizi</button>
        </div>
      </div>
      <div class="right">
        <button id="btnOpenPlus" class="btn ghost" type="button">Plus</button>
      </div>
    </div>

    <!-- Vicino a te -->
    <section id="viewNearby" class="view">
      <div id="nearbyGrid" class="grid grid-2"></div>
    </section>

    <!-- Amore -->
    <section id="viewLove" class="view hidden" aria-hidden="true">
      <div class="deck" id="loveDeck" aria-live="polite"></div>
      <div class="deck-actions">
        <button id="btnDislikeLove" class="btn ghost" type="button" aria-label="Nope">ü•≤</button>
        <button id="btnLikeLove" class="btn gold" type="button" aria-label="Like">üíõ</button>
      </div>
    </section>

    <!-- Giochiamo insieme -->
    <section id="viewPlay" class="view hidden" aria-hidden="true">
      <div class="deck" id="playDeck" aria-live="polite"></div>
      <div class="deck-actions">
        <button id="btnDislikePlay" class="btn ghost" type="button" aria-label="Nope">ü•≤</button>
        <button id="btnLikePlay" class="btn gold" type="button" aria-label="Like">üíõ</button>
      </div>
    </section>

    <!-- Ricerca personalizzata -->
    <section id="viewSearch" class="view hidden" aria-hidden="true">
      <form id="searchForm" class="filters" autocomplete="off">
        <div class="filter">
          <label for="breedInput">Razza</label>
          <input id="breedInput" name="breed" type="text" placeholder="Inizia a digitare..." inputmode="text" />
          <ul id="breedSuggest" class="suggestions" role="listbox" aria-label="Suggerimenti razza"></ul>
        </div>
        <div class="filter">
          <label for="sexFilter">Sesso</label>
          <select id="sexFilter" name="sex">
            <option value="">Qualsiasi</option>
            <option value="M">Maschio</option>
            <option value="F">Femmina</option>
          </select>
        </div>
        <div class="filter">
          <label for="badgeFilter">Badge Verificato</label>
          <select id="badgeFilter" name="badge">
            <option value="">Qualsiasi</option>
            <option value="yes">S√¨</option>
            <option value="no">No</option>
          </select>
        </div>

        <!-- Gold filter: visibile solo Plus -->
        <div class="filter gold-only" data-plus-only="true">
          <label for="pairingFilter">Disponibile per accoppiamento</label>
          <select id="pairingFilter" name="pairingFilter" aria-label="Filtro: disponibile per accoppiamento">
            <option value="">Qualsiasi</option>
            <option value="si">S√¨</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="actions">
          <button id="btnApplyFilters" class="btn primary" type="submit">Applica filtri</button>
          <button id="btnResetFilters" class="btn ghost" type="reset">Reset</button>
        </div>
      </form>
      <div id="searchResults" class="grid grid-2"></div>
    </section>

    <!-- Servizi -->
    <section id="viewServices" class="view hidden" aria-hidden="true">
      <div class="services">
        <button class="svc" data-q="veterinari vicino a me">Veterinari</button>
        <button class="svc" data-q="toelettatura per cani vicino a me">Toelettatura</button>
        <button class="svc" data-q="negozi animali vicino a me">Negozi</button>
        <button class="svc" data-q="parchi per cani vicino a me">Parchi</button>
        <button class="svc" data-q="addestratori cani vicino a me">Addestratori</button>
        <button class="svc" data-q="canili vicino a me">Canili</button>
      </div>
    </section>
  </section>

  <!-- ======== PROFILO DOG ======== -->
  <section id="profilePage" class="profile hidden" aria-hidden="true">
    <header class="profile-header">
      <button id="btnCloseProfile" class="btn ghost" type="button" aria-label="Chiudi profilo">‚úï</button>
      <h2 id="profileName" class="profile-name">Nome</h2>
      <div class="verified-badge" id="profileBadge" hidden>‚úî Verificato</div>
    </header>

    <div class="profile-body">
      <div class="profile-photo">
        <img id="profilePhoto" alt="Foto DOG" src="dog1.jpg" />
        <button id="btnViewSelfie" class="btn ghost small" type="button">Vedi selfie</button>
      </div>

      <div class="profile-info">
        <dl class="facts">
          <div><dt>Razza</dt><dd id="profileBreed">-</dd></div>
          <div><dt>Et√†</dt><dd id="profileAge">-</dd></div>
          <div><dt>Distanza</dt><dd id="profileKm">-</dd></div>
          <div><dt>Sesso</dt><dd id="profileSex">-</dd></div>
        </dl>

        <!-- Gold field: visibile solo Plus -->
        <div class="field gold-only" data-plus-only="true">
          <label for="pairingInput">Disponibile per accoppiamento</label>
          <select id="pairingInput" name="pairingInput" aria-label="Disponibile per accoppiamento">
            <option value="">Seleziona‚Ä¶</option>
            <option value="si">S√¨</option>
            <option value="no">No</option>
          </select>
        </div>

        <div class="profile-actions">
          <button id="btnMessage" class="btn primary" type="button">Messaggio</button>
        </div>
      </div>

      <div class="profile-gallery">
        <h3>Foto</h3>
        <div id="profileGallery" class="gallery grid grid-3"></div>
      </div>
    </div>

    <footer class="profile-footer">
      <div class="sponsor-footer">
        <h4 class="sponsor-title small">Sponsor ufficiale</h4>
        <a id="sponsorLinkProfile" href="#" role="button" aria-label="Apri sponsor Fido">
          <img src="sponsor-fido.png" alt="Fido ‚Äî il gelato per i tuoi amici a quattro zampe" class="sponsor-logo small" />
        </a>
        <p class="sponsor-copy small">Fido, il gelato per i tuoi amici a quattro zampe</p>
      </div>
    </footer>
  </section>

  <!-- ======== MODALE PLUS ======== -->
  <dialog id="plusModal" class="modal" aria-labelledby="plusTitle">
    <form method="dialog" class="modal-content">
      <header class="modal-header">
        <h2 id="plusTitle">Plutoo Plus</h2>
        <button id="closePlus" class="btn ghost" type="submit" aria-label="Chiudi">‚úï</button>
      </header>
      <div class="modal-body">
        <ul class="benefits">
          <li>Rimuove tutte le pubblicit√† e i video reward</li>
          <li>Sblocca i filtri Gold (incluso ‚ÄúDisponibile per accoppiamento‚Äù)</li>
          <li>Supporta lo sviluppo dell‚Äôapp</li>
        </ul>
      </div>
      <footer class="modal-footer">
        <button id="getPlus" class="btn gold" type="button">Attiva Plus</button>
        <button id="laterPlus" class="btn ghost" type="submit">Pi√π tardi</button>
      </footer>
    </form>
  </dialog>

  <!-- ======== OVERLAY ANIMAZIONI ======== -->
  <!-- Bagliore viola per ingresso/Entra e apertura profilo -->
  <div id="transitionOverlay" class="overlay overlay-enter hidden" aria-hidden="true">
    <div class="overlay-violet" role="presentation"></div>
  </div>

  <!-- Cuore dorato per match (Amore & Play) -->
  <div id="matchOverlay" class="overlay overlay-match hidden" aria-hidden="true">
    <div class="heart-gold" role="img" aria-label="Match">üíõ</div>
  </div>

  <!-- ======== SCRIPT ======== -->
  <script src="app.js?v=7" defer></script>
</body>
</html>
