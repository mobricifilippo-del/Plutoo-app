<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
  <title>Plutoo — Gold Edition</title>

  <!-- PWA -->
  <link rel="manifest" href="./manifest.json" />
  <meta name="theme-color" content="#1A0F2E">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <link rel="apple-touch-icon" href="./plutoo-icon-192.png">

  <!-- Icons -->
  <link rel="icon" type="image/png" sizes="32x32" href="./plutoo-icon-192.png" />
  <link rel="icon" type="image/png" sizes="192x192" href="./plutoo-icon-512.png" />

  <!-- Styles -->
  <link rel="stylesheet" href="./style.css?v=lg4">
</head>
<body class="theme-gold">

  <!-- =============== TOP BAR =============== -->
  <header class="topbar">
    <div class="topbar-left">
      <button id="btnBack" class="chip hidden" 
      aria-label="Torna indietro">←</button>
      <img src="./plutoo-icon-192.png" class="brand-icon" alt="Plutoo" />
      <span class="brand-name">Plutoo</span>
    </div>

    <nav id="chipsBar" class="topbar-center hidden">
      <button id="tab-love"   class="chip" data-view="love"   data-i18n="tab_love">Amore 🥲💛</button>
      <button id="tab-play"   class="chip" data-view="play"   data-i18n="tab_play">Giochiamo insieme 🥲🐕</button>
      <button id="tab-plus"   class="chip" data-view="plus"   data-i18n="tab_plus">Plus ⭐</button>
      <button id="tab-search" class="chip" data-view="search" data-i18n="tab_search">Ricerca 🔍</button>
      <button id="tab-places" class="chip" data-view="places" data-i18n="tab_places">Luoghi PET 🐾</button>
      <button id="tab-nearby" class="chip" data-view="nearby" data-i18n="tab_nearby">Vicino a te</button>
    </nav>

    <div <div class="topbar-right">
  <button id="lang-it" class="lang-btn" aria-label="Italiano">🇮🇹</button>
  <button id="lang-en" class="lang-btn" aria-label="English">🇬🇧</button>
  <button id="btnLogin" class="chip chip-gold" data-i18n="login">Login</button>
  <button id="btnSignup" class="chip chip-gold" data-i18n="signup">Registrati</button>
  <button id="btnLogout" class="chip chip-gold hidden" data-i18n="logout">Logout</button>
</div>
    </div>
  </header>

  <main id="views">

    <!-- =============== HOME =============== -->
    <section id="view-home" class="view view-active" aria-label="Home">
      <div class="home-wrap">
        <!-- Logo grande -->
        <img src="./plutoo-icon-512.png" alt="Plutoo" class="hero-logo" />

        <!-- CTA Entra -->
        <div class="hero-actions">
          <button id="btnEnter" class="cta cta-gold" data-i18n="enter">ENTRA</button>
        </div>

        <!-- Sponsor -->
        <div class="home-sponsor">
          <div class="sponsor-badge" data-i18n="sponsor_badge">Sponsor ufficiale</div>
          <button id="sponsorFido" class="sponsor-card sponsor-card--home" type="button">
            <img src="./sponsor-logo.png" class="sponsor-logo" alt="Fido" />
            <div class="sponsor-copy">
              <div class="sponsor-title" data-i18n="sponsor_title">Fido</div>
              <div class="sponsor-text"  data-i18n="sponsor_sub">Il gelato per i nostri amici a quattro zampe</div>
            </div>
          </button>
        </div>

        <!-- Box etico -->
        <button class="ethic-cta" data-i18n="ethic_cta">
          Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)
        </button>
      </div>
    </section>

    <!-- =============== VICINO A TE =============== -->
    <section id="view-nearby" class="view" hidden aria-label="Vicino a te">
      <div id="nearbyGrid" class="grid-2">
        <!-- popolato da app.js -->
      </div>

      <div class="nearby-footer">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
        <button class="ethic-cta" data-i18n="ethic_cta">Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)</button>
      </div>
    </section>

    <!-- =============== AMORE (SWIPE) =============== -->
    <section id="view-love" class="view" hidden aria-label="Amore">
      <div id="swipeArea" class="swipe-area">
        <div id="swipeCard" class="swipe-card frame-gold">
          <div class="placeholder">💛</div>
        </div>
        <div class="swipe-actions">
          <button id="btnDislike" class="btn btn-ghost">🥲</button>
          <button id="btnLike"    class="btn btn-gold">💛</button>
        </div>
      </div>

      <div class="page-sponsor">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
      </div>

      <button class="ethic-cta" data-i18n="ethic_cta">Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)</button>
    </section>

    <!-- =============== GIOCHIAMO INSIEME =============== -->
    <section id="view-play" class="view" hidden aria-label="Giochiamo insieme">
      <div class="placeholder">Social & passeggiate</div>

      <div class="page-sponsor">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
      </div>

      <button class="ethic-cta" data-i18n="ethic_cta">Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)</button>
    </section>

    <!-- =============== PLUS (ABBONAMENTO) =============== -->
    <section id="view-plus" class="view" hidden aria-label="Plus">
      <ul class="plus-list">
        <li data-i18n="plus_1">Rimuove tutti gli annunci</li>
        <li data-i18n="plus_2">Filtri Gold e funzioni Premium</li>
        <li data-i18n="plus_3">Supporto prioritario</li>
      </ul>
      <button id="btnBuyPlus" class="btn btn-gold" data-i18n="plus_buy">Attiva €39,90/anno</button>

      <div class="page-sponsor">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
      </div>
    </section>

    <!-- =============== RICERCA PERSONALIZZATA =============== -->
    <section id="view-search" class="view" hidden aria-label="Ricerca">
      <form id="filtersForm" class="filters">
        <div class="field">
          <label for="breed" data-i18n="f_breed">Razza</label>
          <input id="breed" type="text" autocomplete="off" placeholder="Inizia a scrivere…" />
          <div id="breedSuggest" class="suggest"></div>
        </div>

        <div class="field">
          <label for="sex" data-i18n="f_sex">Sesso</label>
          <select id="sex">
            <option value=""        data-i18n="any">Qualsiasi</option>
            <option value="male"    data-i18n="male">Maschio</option>
            <option value="female"  data-i18n="female">Femmina</option>
          </select>
        </div>

        <div class="field check">
          <label>
            <input id="verified" type="checkbox" />
            <span data-i18n="f_verified">Badge verificato Gold</span>
          </label>
        </div>

        <div class="actions">
          <button type="reset"  class="btn btn-ghost" data-i18n="reset">Reset</button>
          <button type="submit" class="btn btn-gold"  data-i18n="apply">Applica</button>
        </div>
      </form>

      <div class="page-sponsor">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
      </div>
    </section>

    <!-- =============== LUOGHI PET =============== -->
    <section id="view-places" class="view" hidden aria-label="Luoghi PET">
      <div class="dropdown">
        <button class="dropdown-item" data-service="veterinari"   data-i18n="svc_vet">Veterinari</button>
        <button class="dropdown-item" data-service="toelettature" data-i18n="svc_groom">Toelettature</button>
        <button class="dropdown-item" data-service="negozi"       data-i18n="svc_shop">Negozi</button>
        <button class="dropdown-item" data-service="parchi"       data-i18n="svc_parks">Parchi</button>
        <button class="dropdown-item" data-service="addestratori" data-i18n="svc_train">Addestratori</button>
        <button class="dropdown-item" data-service="canili"       data-i18n="svc_shelter">Canili</button>
      </div>

      <div class="page-sponsor">
        <div class="sponsor-inline">
          <img src="./sponsor-logo.png" alt="Fido" />
          <span>Fido — il gelato per cani</span>
        </div>
      </div>

      <button class="ethic-cta" data-i18n="ethic_cta">Non abbandonare mai i tuoi amici 🐾 (canili vicino a me)</button>
    </section>

    <!-- =============== PROFILO (SHEET) =============== -->
    <section id="profilePage" class="sheet" hidden aria-label="Profilo Dog">
      <div class="sheet-inner frame-gold">
        <button id="btnCloseProfile" class="sheet-close" aria-label="Chiudi">✕</button>

        <div id="profileMainPhoto" class="profile-photo"></div>
        <h3 id="profileName" class="profile-name"></h3>
        <div id="profileInfo" class="profile-info"></div>
        <span id="badgeVerified" class="badge" hidden data-i18n="verified_gold">Verificato Gold</span>

        <div class="profile-actions" style="display:flex; gap:10px; margin-top:10px">
          <button class="btn btn-ghost" title="Dislike">🥲</button>
          <button class="btn btn-gold"  title="Like">💛</button>
          <button id="btnOpenChat"     class="btn btn-outline" data-i18n="open_chat">Apri chat</button>
          <button id="btnUnlockSelfie" class="btn btn-outline">Selfie</button>
        </div>
      </div>
    </section>

    <!-- =============== DIALOGO REWARD / INTERSTITIAL =============== -->
    <dialog id="rewardDialog"></dialog>
  </main>

  <!-- Script principale -->
  <!-- carica lo script dalla root, con cache-bust e in modo sicuro -->
<script src="/app.js?v=lg9" defer></script>
  <script>
window.addEventListener('DOMContentLoaded', function () {
  const b = document.getElementById('btnEnter');
  if (!b) { alert('btnEnter non trovato'); return; }

  // assicura che sia cliccabile
  b.classList.remove('disabled');
  b.removeAttribute('disabled');

  // hotfix: imposta lo stato "postlogin" e navighiamo
  b.addEventListener('click', function (e) {
    e.preventDefault();
    try {
      localStorage.setItem('pl_postlogin', '1'); // stessa chiave usata dall’app
    } catch (_) {}
    // se app.js non è partito, almeno navighiamo e al reload parte
    location.href = '#love';
    location.reload();
  }, { once: true });
});
</script>
</body>
</html>
