<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Plutoo</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#0b0b3a">

  <!-- Icone -->
  <link rel="icon" type="image/png" sizes="192x192" href="plutoo-icon-192.png">
  <link rel="icon" type="image/png" sizes="512x512" href="plutoo-icon-512.png">
  <link rel="apple-touch-icon" sizes="180x180" href="plutoo-icon-512.png">

  <!-- iOS look -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- TOPBAR -->
  <header class="topbar">
    <div class="brand-slot">
      <img class="brand" src="plutoo-icon-512.png" alt="Plutoo" onerror="this.style.display='none'">
      <span class="brand-name">Plutoo</span>
    </div>
    <nav class="auth">
      <a id="btnLoginTop" href="javascript:void(0)">Login</a>
      <a id="btnRegisterTop" class="primary" href="javascript:void(0)">Registrati</a>
    </nav>
  </header>

  <!-- HOME / LANDING -->
  <main id="landing" class="screen active">
    <section class="hero">
      <img class="hero-logo" src="plutoo-icon-512.png" alt="Plutoo">
      <a id="ctaEnter" class="btn primary" href="#app">Entra</a>
      <a id="btnLoginUnder" class="link-under" href="javascript:void(0)">Accedi</a>

      <!-- Sponsor in home (testo ‚Üí logo ‚Üí payoff) -->
      <div class="sponsor-block">
        <div class="sponsor-label">Sponsor ufficiale ‚Äî ‚ÄúFido‚Äù il gelato per i tuoi amici a quattro zampe</div>
        <a class="sponsor-link" href="https://www.gelatofido.it/" target="_blank" rel="noopener">
          <img class="sponsor-img" src="sponsor-logo.png" alt="Fido">
        </a>
      </div>

      <footer class="home-footer">
        <button class="link-inline" id="openPrivacy">Privacy</button>
        <span class="dot">¬∑</span>
        <button class="link-inline" id="openTerms">Termini</button>
      </footer>
    </section>
  </main>

  <!-- APP -->
  <section id="app" class="screen">

    <!-- geolocalizzazione (placeholder) -->
    <div id="geoBar" class="geobar">
      <span>Attiva la posizione per vedere gli amici vicino a te</span>
      <div class="g-actions">
        <button id="enableGeo" class="btn xs primary">Attiva</button>
        <button id="dismissGeo" class="btn xs light">Pi√π tardi</button>
      </div>
    </div>

    <!-- tabs + toggle filtri -->
    <div class="filters-header">
      <div class="tabs">
        <button class="tab active" data-tab="near">Vicino a te</button>
        <button class="tab" data-tab="love">Amore</button>
        <button class="tab" data-tab="social">Giocare/Camminare</button>
        <button class="tab" data-tab="matches">Match</button>
      </div>
      <button id="filterToggle" class="btn ghost">Ricerca personalizzata ‚ñæ</button>
    </div>

    <!-- pannello filtri -->
    <section id="filterPanel" class="filter-panel" hidden>
      <form id="filterForm">
        <div class="f-grid">
          <label class="f-item">
            <span>Razza</span>
            <input id="breedInput" name="breed" placeholder="Inizia a digitare‚Ä¶" list="breedList" autocomplete="off">
            <datalist id="breedList"></datalist>
          </label>

          <label class="f-item">
            <span>Et√†</span>
            <select name="ageBand">
              <option value="">Tutte</option>
              <option value="0‚Äì1">0‚Äì1</option>
              <option value="2‚Äì4">2‚Äì4</option>
              <option value="5‚Äì7">5‚Äì7</option>
              <option value="8+">8+</option>
            </select>
          </label>

          <label class="f-item">
            <span>Sesso</span>
            <select name="sex">
              <option value="">Qualsiasi</option>
              <option value="M">Maschio</option>
              <option value="F">Femmina</option>
            </select>
          </label>

          <label class="f-item">
            <span>Taglia</span>
            <select name="size">
              <option value="">Tutte</option>
              <option>Piccola</option>
              <option>Media</option>
              <option>Grande</option>
            </select>
          </label>

          <label class="f-item">
            <span>Pelo</span>
            <select name="coat">
              <option value="">Qualsiasi</option>
              <option>Corto</option>
              <option>Medio</option>
              <option>Lungo</option>
            </select>
          </label>

          <label class="f-item">
            <span>Energia</span>
            <select name="energy">
              <option value="">Qualsiasi</option>
              <option>Bassa</option>
              <option>Media</option>
              <option>Alta</option>
            </select>
          </label>

          <label class="f-item">
            <span>Pedigree</span>
            <select name="pedigree">
              <option value="">Indifferente</option>
              <option value="S√¨">S√¨</option>
              <option value="No">No</option>
            </select>
          </label>

          <label class="f-item">
            <span>Distanza max (km)</span>
            <input type="number" name="distance" min="1" step="0.1" placeholder="es. 5">
          </label>
        </div>

        <div class="f-actions">
          <button type="button" id="filtersReset" class="btn light">Reset</button>
          <button type="submit" class="btn primary">Applica</button>
        </div>
      </form>
      <div id="activeChips" class="chips"></div>
    </section>

    <!-- VICINO -->
    <section id="near" class="tabpane active">
      <div id="counter" class="counter"></div>
      <div id="grid" class="grid"></div>
      <div id="emptyNear" class="empty hidden">Nessun profilo.</div>
    </section>

    <!-- AMORE -->
    <section id="love" class="tabpane">
      <div class="deck">
        <article class="card big">
          <img id="loveImg" src="dog1.jpg" alt="">
          <div class="card-info">
            <div class="title">
              <div id="loveTitle" class="name">‚Äî</div>
              <div id="loveMeta" class="dist">‚Äî</div>
            </div>
            <p id="loveBio" class="bio">‚Äî</p>
            <div class="actions">
              <button id="loveNo" class="circle no" title="No">ü•≤</button>
              <button id="loveYes" class="circle like" title="Mi piace">‚ù§Ô∏è</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- GIOCARE/CAMMINARE -->
    <section id="social" class="tabpane">
      <div class="deck">
        <article class="card big">
          <img id="socImg" src="dog1.jpg" alt="">
          <div class="card-info">
            <div class="title">
              <div id="socTitle" class="name">‚Äî</div>
              <div id="socMeta" class="dist">‚Äî</div>
            </div>
            <p id="socBio" class="bio">‚Äî</p>
            <div class="actions">
              <button id="socNo" class="circle no" title="No">ü•≤</button>
              <button id="socYes" class="circle dog" title="Invita a giocare">üêï</button>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- MATCH -->
    <section id="matches" class="tabpane">
      <div id="matchList" class="list"></div>
      <div id="emptyMatch" class="empty">Nessun match ancora.</div>
    </section>

    <!-- SPONSOR footer centrato (testo ‚Üí logo ‚Üí payoff) -->
    <div class="sponsor-app">
      <div class="sponsor-label">Sponsor ufficiale ‚Äî ‚ÄúFido‚Äù il gelato per i tuoi amici a quattro zampe</div>
      <a class="sponsor-link" href="https://www.gelatofido.it/" target="_blank" rel="noopener">
        <img class="sponsor-img" src="sponsor-logo.png" alt="Fido">
      </a>
    </div>

    <!-- Banner pubblicitario (placeholder) -->
    <div id="adBanner" class="ad-banner">Banner pubblicitario (placeholder)</div>
  </section>

  <!-- PAGINA PROFILO (fullscreen) -->
  <section id="profilePage" class="profile-page">
    <div class="pp-head">
      <strong id="ppTitle">Profilo</strong>
      <button class="btn light small" onclick="document.getElementById('profilePage').classList.remove('show')">Chiudi</button>
    </div>
    <div id="ppBody" class="pp-body"></div>
  </section>

  <!-- DIALOG / SHEETS / CHAT / LEGAL -->
  <dialog id="interstitial" class="modal inter">
    <div class="inter-body">
      <h3>Annuncio video (placeholder)</h3>
      <p class="muted">Questo √® un interstitial fittizio per il web. Chiudi per continuare.</p>
      <button class="btn primary" onclick="document.getElementById('interstitial').close()">Chiudi</button>
    </div>
  </dialog>

  <div id="sheetLogin" class="sheet">
    <div class="sheet-box">
      <div class="sheet-head"><strong>Login</strong><button class="close" data-close="sheetLogin">√ó</button></div>
      <div class="sheet-body">
        <input class="inp" placeholder="Email">
        <input class="inp" placeholder="Password" type="password">
        <button id="loginSubmit" class="btn primary full">Continua</button>
      </div>
    </div>
  </div>

  <div id="sheetRegister" class="sheet">
    <div class="sheet-box">
      <div class="sheet-head"><strong>Registrati</strong><button class="close" data-close="sheetRegister">√ó</button></div>
      <div class="sheet-body">
        <input class="inp" placeholder="Nome">
        <input class="inp" placeholder="Email">
        <input class="inp" placeholder="Password" type="password">
        <button id="registerSubmit" class="btn primary full">Crea account</button>
      </div>
    </div>
  </div>

  <div id="chat" class="sheet">
    <div class="sheet-box">
      <div class="sheet-head">
        <div class="chat-head">
          <img id="chatAvatar" class="avatar" src="dog1.jpg" alt="">
          <div id="chatName" class="chat-name">Chat</div>
        </div>
        <button class="close" data-close="chat">√ó</button>
      </div>
      <div class="sheet-body chat-body">
        <div id="thread" class="thread"></div>
        <div class="chat-send">
          <input id="chatInput" class="inp" placeholder="Scrivi‚Ä¶">
          <button id="sendBtn" class="btn primary">Invia</button>
        </div>
      </div>
    </div>
  </div>

  <dialog id="privacyDlg" class="modal legal">
    <div class="pad">
      <h3>Privacy</h3>
      <p>Raccogliamo dati profilo forniti dall‚Äôutente e posizione approssimata (se attivata) per mostrare profili nelle vicinanze e gestire match/chat. Usiamo cookie tecnici e, in futuro, pubblicitari (AdMob in app nativa). Puoi richiedere esportazione o cancellazione dati scrivendo a supporto@plutoo.app.</p>
      <p>Per gli annunci: in questa versione web mostriamo solo segnaposto. Nella versione Android verranno applicate le policy AdMob.</p>
      <button class="btn primary" onclick="document.getElementById('privacyDlg').close()">OK</button>
    </div>
  </dialog>

  <dialog id="termsDlg" class="modal legal">
    <div class="pad">
      <h3>Termini</h3>
      <p>Plutoo √® una piattaforma per far incontrare proprietari di cani. Sei responsabile dei contenuti che pubblichi e delle interazioni. Le funzioni di verifica documenti sono dimostrative. √à vietato pubblicare foto di persone o contenuti non attinenti.</p>
      <button class="btn primary" onclick="document.getElementById('termsDlg').close()">OK</button>
    </div>
  </dialog>

  <!-- SCRIPT -->
  <script src="app.js"></script>
  <script>
    // SW
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("sw.js").catch(()=>{});
    }
    // Fallback hash per #app
    function _forceApp(){
      const l=document.getElementById('landing'), a=document.getElementById('app');
      if(l&&a){ l.classList.remove('active'); a.classList.add('active'); }
    }
    if (location.hash === '#app') _forceApp();
    window.addEventListener('hashchange', ()=>{ if(location.hash==='#app') _forceApp(); });
  </script>
</body>
</html>
