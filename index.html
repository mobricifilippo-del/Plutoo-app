<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <title>Plutoo</title>
  <link rel="stylesheet" href="style.css?v=4" />
</head>
<body>

  <!-- =================== TOPBAR =================== -->
  <header class="topbar">
    <div class="brand" id="topBrandSlot">
      <img src="plutoo-icon-512.png" alt="Plutoo" class="brand-logo">
      <span class="brand-name">Plutoo</span>
    </div>
    <nav class="topnav">
      <a href="javascript:void(0)" id="btnLogin"
         onclick="document.getElementById('sheetLogin').classList.add('show')">Login</a>
      <a href="javascript:void(0)" id="btnRegister"
         class="btn-reg"
         onclick="document.getElementById('sheetRegister').classList.add('show')">Registrati</a>
    </nav>
  </header>

  <!-- =================== HOME =================== -->
  <main id="home" class="screen active">
    <div class="hero">
      <img src="plutoo-icon-512.png" alt="Plutoo" class="hero-logo">
      <a id="ctaEnter" class="btn primary"
         href="javascript:void(0)" onclick="goHome()">Entra</a>
      <a id="btnLoginUnder" class="link-under"
         href="javascript:void(0)"
         onclick="document.getElementById('sheetLogin').classList.add('show')">Accedi</a>
    </div>

    <div class="sponsor-block">
      <div class="sponsor-label">Sponsor ufficiale</div>
      <a href="https://www.gelatofido.it/" target="_blank" rel="noopener">
        <img src="sponsor-logo.png" alt="Sponsor Fido" class="sponsor-img"
             onerror="this.style.display='none'">
      </a>
    </div>

    <footer class="footer-links">
      <button class="link-inline" id="openPrivacy"
              onclick="document.getElementById('privacyDlg').showModal()">Privacy</button>
      <span class="dot">·</span>
      <button class="link-inline" id="openTerms"
              onclick="document.getElementById('termsDlg').showModal()">Termini</button>
    </footer>
  </main>

  <!-- =================== APP =================== -->
  <main id="app" class="screen">

    <!-- Barra geolocalizzazione -->
    <div id="geoBar" class="geo-bar hidden">
      <span>Attiva la posizione per vedere gli amici vicino a te</span>
      <button id="enableGeo" class="btn small primary">Attiva</button>
      <button id="dismissGeo" class="btn small">Più tardi</button>
    </div>

    <!-- Tabs -->
    <div class="tabs">
      <button class="tab active" data-tab="near">Vicino</button>
      <button class="tab" data-tab="swipe">Scorri</button>
      <button class="tab" data-tab="matches">Match</button>
    </div>

    <!-- Ricerca personalizzata -->
    <div class="search-toggle">
      <button onclick="toggleSearch()">Ricerca personalizzata ▾</button>
    </div>
    <div id="filterPanel" class="filter-panel" hidden>
      <form id="filterForm">
        <label>Razza:
          <select name="breed">
            <option value="">Tutte</option>
            <option>Labrador</option>
            <option>Jack Russell</option>
            <option>Shiba Inu</option>
            <option>Golden Retriever</option>
            <option>Beagle</option>
            <option>Meticcio</option>
          </select>
        </label>
        <label>Età:
          <select name="age">
            <option value="">Tutte</option>
            <option>0–1</option>
            <option>2–4</option>
            <option>5–7</option>
            <option>8+</option>
          </select>
        </label>
        <label>Sesso:
          <select name="sex">
            <option value="">Qualsiasi</option>
            <option value="M">M</option>
            <option value="F">F</option>
          </select>
        </label>
        <label>Taglia:
          <select name="size">
            <option value="">Tutte</option>
            <option>Piccola</option>
            <option>Media</option>
            <option>Grande</option>
          </select>
        </label>
        <label>Pelo:
          <select name="coat">
            <option value="">Tutti</option>
            <option>Corto</option>
            <option>Medio</option>
            <option>Lungo</option>
          </select>
        </label>
        <label>Energia:
          <select name="energy">
            <option value="">Tutte</option>
            <option>Bassa</option>
            <option>Media</option>
            <option>Alta</option>
          </select>
        </label>
        <label>Pedigree:
          <select name="pedigree">
            <option value="">Indifferente</option>
            <option>Sì</option>
            <option>No</option>
          </select>
        </label>
        <label>Distanza max (km):
          <input type="number" name="distance" min="1" max="50">
        </label>
        <div class="filter-actions">
          <button type="button" id="filtersReset">Reset</button>
          <button type="submit" class="btn primary">Applica</button>
        </div>
      </form>
      <div id="activeChips" class="chips"></div>
    </div>

    <!-- Tab Vicino -->
    <section id="near" class="tabpane active">
      <div id="countLabel" class="count"></div>
      <div id="grid" class="grid"></div>
      <div id="emptyNear" class="empty hidden">Nessun profilo trovato.</div>
    </section>

    <!-- Tab Scorri -->
    <section id="swipe" class="tabpane">
      <div id="deckCard" class="deck"></div>
    </section>

    <!-- Tab Match -->
    <section id="matches" class="tabpane">
      <div id="matchList" class="match-list"></div>
      <div id="emptyMatch" class="empty">Nessun match ancora.</div>
    </section>
  </main>

  <!-- =================== MODALI =================== -->
  <dialog id="privacyDlg" class="modal">
    <h2>Privacy</h2>
    <p>Dati raccolti: profilo, posizione approssimata.<br>
    Finalità: match e chat.<br>
    Cookie: usati solo per funzionamento.<br>
    Annunci: placeholder, in futuro AdMob.<br>
    Diritti utente: accesso, cancellazione.<br>
    Contatti: supporto@example.com</p>
    <button onclick="this.closest('dialog').close()">Chiudi</button>
  </dialog>

  <dialog id="termsDlg" class="modal">
    <h2>Termini</h2>
    <p>Uso consentito solo a maggiorenni.<br>
    Non condividere contenuti illeciti.<br>
    Plutoo non è responsabile di usi impropri.<br>
    Puoi richiedere cancellazione dati in ogni momento.</p>
    <button onclick="this.closest('dialog').close()">Chiudi</button>
  </dialog>

  <!-- Sheet Login -->
  <div id="sheetLogin" class="sheet">
    <div class="sheet-box">
      <h3>Login</h3>
      <input type="email" placeholder="Email">
      <input type="password" placeholder="Password">
      <button id="loginSubmit" class="btn primary">Entra</button>
      <button class="close" data-close="sheetLogin">Chiudi</button>
    </div>
  </div>

  <!-- Sheet Register -->
  <div id="sheetRegister" class="sheet">
    <div class="sheet-box">
      <h3>Registrati</h3>
      <input type="text" placeholder="Nome">
      <input type="email" placeholder="Email">
      <input type="password" placeholder="Password">
      <button id="registerSubmit" class="btn primary">Crea account</button>
      <button class="close" data-close="sheetRegister">Chiudi</button>
    </div>
  </div>

  <!-- JS -->
  <script src="app.js?v=4"></script>
</body>
</html>
